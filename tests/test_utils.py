import pytest

from deep_collection import get_by_path


@pytest.mark.parametrize(
    "obj, path, result",
    [
        ({"a": {"b": {"c": {"d": 5}}}, "d": 4}, ["*", "a", "*", "d"], 5),
        ({"a": {"b": {"c": {"d": 5}}}, "d": 4}, ["*", "b", "*", "d"], 5),
        ({"a": {"b": {"d": 5}}, "d": 4}, ["a", "*", "d"], 5),
        ({"a": {"b": {"c": {"d": 5}}}, "d": 4}, ["*", "d"], [5, 4]),
        ({"a": {"b": {"c": {"d": 5}}}, "d": 4}, ["*", "*", "d"], [5, 4]),
        ({"a": {"b": {"c": {"d": 5}}}, "d": 4}, ["*", "*", "*", "d"], [5, 4]),
        ({"a": 1}, ["*"], {"a": 1}),
        ({"a": 1}, ["a", "*"], 1),
        ({"a": 1}, [], {"a": 1}),
        ({"a": 1}, ["a", "*"], 1),
        ({"*": 1}, ["*"], {"*": 1}),
        ({"a": {"*": {"d": 5}}}, ["*", "d"], 5),
        ({"a": {"*": {"d": 5}}, "d": 4}, ["*", "d"], [5, 4]),
        ({"a": {"*": {"*": {"d": 5}}}, "d": 4}, ["*", "d"], [5, 4]),
        ({"*": {"d": 5}}, ["*", "d"], 5),
        ({"d": [5]}, ["d"], [5]),
    ],
)
def test_get_by_path(obj, path, result):
    assert get_by_path(obj, path) == result
